<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>For Lina ‚Äî Open Me üíå</title>
<style>
  /* =========================
     Theme & Base
  ========================= */
  :root{
    --pink:#ffb3c7;
    --pink-2:#ff83a6;
    --pink-3:#ff5c8a;
    --red:#ff2d55;
    --rose:#d81b60;
    --white:#fff;
    --ink:#7a1537;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; font-family: ui-rounded, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    color:var(--ink); overflow:hidden;
    background: radial-gradient(1200px 700px at 50% -10%, #ffe9f1, #fff0f5);
  }

  /* Animated background gradient rings */
  .bg{
    position:fixed; inset:-20% -20% 0 -20%; z-index:-2; filter:saturate(110%);
    background:
      radial-gradient(35vmax 30vmax at 15% 10%, rgba(255,92,143,.18), transparent 60%),
      radial-gradient(40vmax 35vmax at 85% 15%, rgba(255,45,85,.13), transparent 60%),
      radial-gradient(50vmax 40vmax at 50% 110%, rgba(255,131,166,.16), transparent 60%);
    animation: drift 24s ease-in-out infinite alternate;
  }
  @keyframes drift{0%{transform:translate3d(0,0,0) scale(1)}100%{transform:translate3d(0,-2%,0) scale(1.03)}}

  /* Sparkle field */
  .sparkles{position:fixed; inset:0; pointer-events:none; z-index:-1}
  .sparkles i{position:absolute; width:2px; height:2px; border-radius:50%; background:rgba(255,255,255,.9); box-shadow:0 0 10px rgba(255,255,255,.9); opacity:.8; animation: twinkle 3s linear infinite}
  @keyframes twinkle{0%,100%{opacity:.15; transform:scale(.6)}50%{opacity:1; transform:scale(1)}}

  /* =========================
     Layout card
  ========================= */
  .shell{position:relative; height:100%; display:grid; place-items:center; padding:24px}
  .card{width:min(95vw, 860px); padding:24px 24px 32px; border-radius:28px; background:rgba(255,255,255,.6); backdrop-filter: blur(10px);
        box-shadow: 0 20px 60px rgba(255,92,143,.25); text-align:center}
  h1{margin:0 0 6px; font-weight:900; letter-spacing:.3px; font-size:clamp(18px,2.8vw,24px)}
  .sub{margin:0 0 14px; opacity:.8; font-size:14px}

  /* =========================
     Envelope (SVG + 3D)
  ========================= */
  .stage{display:grid; place-items:center; perspective:1200px; margin:8px 0 0}
  .env-wrap{position:relative; transform-style:preserve-3d}
  .env-wrap:hover{transform: rotateX(3deg) rotateY(-5deg)}
  .envelope{width:min(75vw, 440px); aspect-ratio: 4/3; cursor:pointer; transform-style:preserve-3d; transition: transform 1s cubic-bezier(.2,.8,.2,1)}
  .envelope:focus-visible{outline:4px solid var(--pink-2); outline-offset:10px; border-radius:22px}
  .glow{position:absolute; inset:-16px; border-radius:26px; background: radial-gradient(circle at 50% 0%, rgba(255,255,255,.9), rgba(255,92,143,.14)); filter: blur(18px); opacity:.8; z-index:-1}

  /* SVG parts animated via CSS variables */
  .flap{transform-origin:50% 20%; transform-box: fill-box; transition: transform .9s cubic-bezier(.2,.7,.2,1)}
  .letter{transform-origin:50% 100%; transform-box: fill-box; transition: transform .9s cubic-bezier(.2,.8,.2,1), opacity .5s}
  .seal{transform-box: fill-box; transform-origin:50% 50%; transition: transform .5s ease, opacity .5s}

  .envelope.open .flap{transform: rotateX(170deg)}
  .envelope.open .letter{transform: translateY(-16%) scale(1.02)}
  .envelope.open .seal{transform: scale(.6); opacity:0}

  /* CTA pulse */
  .pulse{position:absolute; inset:0; border-radius:24px; pointer-events:none}
  .pulse::before{content:""; position:absolute; inset:-8px; border-radius:30px; border:2px dashed #ff9ab6; animation:ring 1.6s ease-out infinite}
  @keyframes ring{0%{transform:scale(.98); opacity:.85}70%{transform:scale(1.08); opacity:.2}100%{opacity:0; transform:scale(1.14)}}

  /* =========================
     Message typing area
  ========================= */
  #message{min-height:1.2em; margin-top:18px; font-weight:900; font-size: clamp(28px, 5.8vw, 56px);
          color:var(--rose); text-shadow:0 16px 40px rgba(216,27,96,.25); letter-spacing:.02em}
  .line{display:inline-block; border-right:3px solid var(--rose); animation: caret .9s steps(1) infinite}
  @keyframes caret{50%{border-color:transparent}}

  /* =========================
     Particle systems
  ========================= */
  .particles, .floaters{position:fixed; inset:0; pointer-events:none}
  .particle{position:absolute; font-size:18px; will-change: transform, opacity; opacity:0}
  @keyframes floatUp{0%{transform:translate(var(--x,0), var(--y,0)) rotate(var(--r,0)); opacity:0} 8%{opacity:1} 100%{transform:translate(calc(var(--x,0) + var(--drift,0)), calc(var(--y,0) - 100vh)) rotate(var(--rr,0)); opacity:0}}

  /* Ambient floating hearts on background */
  .floater{position:absolute; opacity:.25; user-select:none; font-size:clamp(18px,2.6vw,34px); animation: bob 12s ease-in-out infinite}
  @keyframes bob{0%,100%{transform:translateY(-6px)}50%{transform:translateY(6px)}}

  /* Reduced motion */
  @media (prefers-reduced-motion: reduce){
    .bg, .pulse::before, .floater, .sparkles i{animation:none}
  }

  .footer{position:fixed; bottom:10px; left:50%; transform:translateX(-50%); font-size:12px; opacity:.65}
</style>
</head>
<body>
  <div class="bg"></div>
  <div class="sparkles" id="sparkles"></div>
  <div class="floaters" id="floaters"></div>

  <div class="shell">
    <div class="card">
      <h1>Open the letter, Lina üíå</h1>
      <p class="sub">A little bit of magic ‚Äî just for you.</p>

      <div class="stage">
        <div class="env-wrap">
          <div class="glow" aria-hidden="true"></div>

          <!-- SVG Envelope -->
          <svg class="envelope" id="envelope" viewBox="0 0 800 600" role="button" tabindex="0" aria-label="Open love letter">
            <!-- Back pocket -->
            <defs>
              <linearGradient id="gPink" x1="0" x2="1">
                <stop offset="0%" stop-color="#ffd1dc"/>
                <stop offset="100%" stop-color="#ff9ab6"/>
              </linearGradient>
              <linearGradient id="gDeep" x1="0" x2="1">
                <stop offset="0%" stop-color="#ff5c8a"/>
                <stop offset="100%" stop-color="#ff83a6"/>
              </linearGradient>
            </defs>
            <rect x="100" y="140" width="600" height="360" rx="24" fill="url(#gPink)" stroke="#ff83a6" stroke-width="8"/>
            <!-- Side pockets -->
            <path d="M100 500 L400 300 L700 500 Z" fill="url(#gDeep)"/>
            <path d="M100 500 L400 420 L700 500 Z" fill="#ffb3c7"/>

            <!-- Letter -->
            <g class="letter">
              <rect x="150" y="190" width="500" height="300" rx="18" fill="#fff" stroke="#ffd6e3" stroke-width="6"/>
              <text x="400" y="330" text-anchor="middle" fill="#ff2d55" font-size="38" font-weight="800" opacity=".14">for Lina</text>
            </g>

            <!-- Flap -->
            <path class="flap" d="M100 140 L400 360 L700 140 Z" fill="#ff5c8a" stroke="#ff83a6" stroke-width="8"/>

            <!-- Seal -->
            <g class="seal">
              <circle cx="400" cy="300" r="42" fill="#fff" stroke="#ff9ab6" stroke-width="8"/>
              <text x="400" y="308" text-anchor="middle" font-size="32">‚ù§</text>
            </g>
          </svg>
          <div class="pulse"></div>
        </div>
      </div>

      <div id="message" aria-live="polite"></div>
    </div>
  </div>

  <div class="footer">Made with ‚ô• for Lina</div>

<script>
(function(){
  console.log('[LinaSite] Script initialized');
  const env = document.getElementById('envelope');
  const msg = document.getElementById('message');
  const sparkles = document.getElementById('sparkles');
  const floaters = document.getElementById('floaters');
  console.log('[LinaSite] Elements fetched:', { hasEnv: !!env, hasMsg: !!msg, hasSparkles: !!sparkles, hasFloaters: !!floaters });

  let opened = false;

  // Ambient sparkles
  for(let i=0;i<60;i++){
    const s=document.createElement('i');
    s.style.left = Math.random()*100 + 'vw';
    s.style.top  = Math.random()*100 + 'vh';
    s.style.animationDelay = (Math.random()*3)+'s';
    sparkles.appendChild(s);
  }
  console.log('[LinaSite] Sparkles created: 60');

  // Ambient floating hearts
  for(let i=0;i<8;i++){
    const f=document.createElement('div');
    f.className='floater';
    f.textContent = Math.random()>.4 ? '‚ù§' : 'ü§ç';
    f.style.left = (8 + Math.random()*84)+'vw';
    f.style.top  = (8 + Math.random()*70)+'vh';
    f.style.animationDelay = (Math.random()*6)+'s';
    floaters.appendChild(f);
  }
  console.log('[LinaSite] Floaters created: 8');

  function typeWriter(text, speed){
    console.log('[LinaSite] typeWriter start:', { text, speed });
    msg.innerHTML = '';
    const span = document.createElement('span');
    span.className='line';
    msg.appendChild(span);
    let i=0;
    const tick=()=>{
      span.textContent = text.slice(0,i);
      i++;
      if(i<=text.length) setTimeout(tick, speed); else { span.classList.remove('line'); console.log('[LinaSite] typeWriter finished'); }
    };
    tick();
  }

  // Fancy particle launcher with bezier-ish drift
  const particlesLayer = document.createElement('div');
  particlesLayer.className='particles';
  document.body.appendChild(particlesLayer);

  function launchParticles(){
    if(!env){ console.warn('[LinaSite] launchParticles: envelope missing'); return; }
    const rect = env.getBoundingClientRect();
    const originX = rect.left + rect.width/2;
    const originY = rect.top + rect.height*0.55;
    console.log('[LinaSite] Launching particles from', { originX, originY });

    const heartCount = 42;
    const butterflyCount = 18;

    function spawn(char, count, baseSize){
      console.log(`[LinaSite] Spawning ${count} √ó ${char}`);
      for(let i=0;i<count;i++){
        const el = document.createElement('span');
        el.className='particle';
        el.textContent=char;
        const size = baseSize * (0.7 + Math.random()*1.1);
        const angle = Math.random()*Math.PI - Math.PI/2; // upward cone
        const speed = 60 + Math.random()*110; // px
        const drift = (Math.random()<.5?-1:1) * (40 + Math.random()*140);
        const rot  = (Math.random()<.5?-1:1) * (20 + Math.random()*80);
        const rr   = rot * (1.2 + Math.random());
        const dur  = 4.5 + Math.random()*3.2;
        const delay= Math.random()*0.5;

        el.style.left = originX + (Math.random()*40-20) + 'px';
        el.style.top  = originY + (Math.random()*10-5) + 'px';
        el.style.fontSize = size + 'px';
        el.style.setProperty('--x', (Math.cos(angle)*speed)+'px');
        el.style.setProperty('--y', (Math.sin(angle)*speed)+'px');
        el.style.setProperty('--drift', drift+'px');
        el.style.setProperty('--r', rot+'deg');
        el.style.setProperty('--rr', rr+'deg');
        el.style.animation = `floatUp ${dur}s ease-in ${delay}s forwards`;
        particlesLayer.appendChild(el);
        setTimeout(()=> el.remove(), (dur+delay)*1000 + 200);
      }
    }
    spawn('‚ù§', heartCount, 26);
    spawn('ü¶ã', butterflyCount, 28);
  }

  function openEnvelope(){
    console.log('[LinaSite] openEnvelope triggered');
    if(opened){ console.log('[LinaSite] Already opened'); return; }
    opened = true;
    env.classList.add('open');
    document.querySelector('.pulse')?.remove();
    // subtle pop
    env.style.transform = 'translateZ(20px) scale(1.02)';
    setTimeout(()=> env.style.transform = '', 600);

    launchParticles();
    typeWriter('I love you Lina', 70);
  }

  if(env){
    env.addEventListener('click', openEnvelope);
    env.addEventListener('keydown', e=>{ if(e.key==='Enter'||e.key===' '){ e.preventDefault(); openEnvelope(); }});
    console.log('[LinaSite] Event listeners registered');
  } else {
    console.error('[LinaSite] Envelope SVG not found ‚Äî check HTML structure');
  }
})();
</script>
</body>
</html>
